{
	"motd": [
		"Welcome to STEVE",
		"Watch your step..."
	],
	"rooms" : {
		"start" : {
			"desc" : "You are standing in a field beside a pile of trash. There is a goat path to the north.",
			"actions" : {
				"north" : { "action" : "move", "room" : "goatPath" },
				"search" : {
					"conditions" : [
						{
							"type" : "extra",
							"extra" : [
								["trash"]
							]
						}
					],
					"choice" : [
						{
							"conditions" : [
								{
									"type" : "item",
									"op" : "gun",
									"max" : 0
								}
							],
							"actions" : [
								{
									"action" : "message",
									"message" : "You rummage through the trash and find a loaded hand gun. This might come in handy later."
								},
								{ "action" : "item_take", "item" : "gun", "count" : 1 }

							]
						},
						{
							"conditions" : [
								{
									"type" : "item",
									"op" : "gun",
									"max" : 1
								}
							],
							"actions" : [
								{
									"action" : "message",
									"message" : "You rummage through the trash and find nothing. Your hands are now filthy."
								}
							]
						}
					]
				}				
			}
		},
		"goatPath" : {
			"desc" : "You find yourself on a goat path. There is an easy, slow path to the east, a dangerous path heading down a cliff side to the west, and a small opening that appears to lead into the mountain to the north.",
			"actions" : {
				"north" : {
					"choice" : [
						{
							"conditions" : [
								{
									"type" : "state",
									"op" : "set",
									"var" : "have_billy"
								}
							],
							"actions" : [
								{
									"action" : "message",
									"message" : "Billy can't fit through the small opening and gets left behind."
								},
								{
									"action" : "state_unset",
									"var" : "have_billy"
								},
								{ "action" : "move", "room" : "trollBridge" }
							]
						},
						{
							"actions" : [
								{
									"action" : "message",
									"message" : "You squeeze your way through the opening."
								},
								{ "action" : "move", "room" : "trollBridge" }
							]
						}
					]
				},
				"east" : { "action" : "move", "room" : "coast1" },
				"west" : {
					"choice" : [
						{
							"conditions" : [
								{
									"type" : "state",
									"op" : "set",
									"var" : "have_billy"
								}
							],
							"actions" : [
								{
									"action" : "message",
									"message" : "You and Billy carefully make your down the steep cliff path. Wheee!"
								},
								{ "action" : "move", "room" : "coast1" }
							]
						},
						{
							"action" : "die",
							"message" : "You attempt to make your way down the path, slipping and falling to your death. A goat you are not."
						}
					]
				},
				"ride" : {
					"conditions" : [
						{
							"type" : "extra",
							"extra" : [
								["goat", "down", "cliff"]
							]
						}
					],
					"choice" : [
						{
							"conditions" : [
								{
									"type" : "state",
									"op" : "unset",
									"var" : "have_billy"
								}
							],
							"actions" : [
								{
									"action" : "message",
									"message" : "You find the nearest goat and carefully make your way down the cliff. You find out the goat's name is Billy. Billy has now joined your party."
								},
								{
									"action" : "state_set",
									"var" : "have_billy"
								},
								{ "action" : "move", "room" : "coast1" }
							]
						},
						{
							"conditions" : [
								{
									"type" : "state",
									"op" : "set",
									"var" : "have_billy"
								}
							],
							"actions" : [
								{
									"action" : "message",
									"message" : "Why would you need another goat?"
								}
							]
						}
					]
				}
			}
		},
		"trollBridge" : {
			"desc" : "You arrive upon a long bridge where you can't even see the other end. The entrance is guarded by two trolls.",
			"actions" : {
				"south" : { "action" : "move", "room" : "goatPath" },
				"eat" : {
					"conditions" : [
						{
							"type" : "extra",
							"extra" : [
								["trolls"],
								["troll"]
							]
						}
					],
					"actions" : [
						{
							"action" : "message",
							"message" : "BLEACH, the trolls taste awful. You have gained +16 trolling power."
						},
						{ "action" : "move", "room" : "bridge" }
					]
				}
			}
		},
		"bridge" : {
			"desc" : "You arrive upon a long bridge where you can't even see the other end. The entrance to the bridge north is clear.",
			"actions" : {
				"south" : { "action" : "move", "room" : "goatPath" },
				"north" : 
				{
					"actions" : [
						{
							"action" : "message",
							"message" : "As you start crossing the bridge, the fog gets thicker and thicker until you cannot see where you are going. As you take the next step, you are falling....... Ouch, that hurt!"
						},
						{ "action" : "move", "room" : "outsideCave" }
					]
				}
			}
		},
		"coast1" : {
			"desc" : "You arrive at the coast line. You can travel east or west along the coast, or north back up the cliff.",
			"actions" : {
				"north" : { "action" : "move", "room" : "goatPath" },
				"west" : { "action" : "move", "room" : "endlessCoast" },
				"east" : { "action" : "move", "room" : "coast2" }
			}
		},
		"endlessCoast" : {
			"desc" : "You arrive at more coast line. You can travel east or west along the coast. It is all starting to look the same.",
			"actions" : {
				"west" : { "action" : "move", "room" : "endlessCoast" },
				"east" : { "action" : "move", "room" : "coast1" }
			}
		},
		"coast2" : {
			"desc" : "You arrive at the coast line. You can travel east or west along the coast. It seems to be getting a little more rocky.",
			"actions" : {
				"west" : { "action" : "move", "room" : "coast1" },
				"east" : { "action" : "move", "room" : "outsideCave" }
			}
		},
		"outsideCave" : {
			"desc" : "The coast line ends at the mouth of a cave with long jagged outcroppings along the mouth of the cave.",
			"actions" : {
				"west" : { "action" : "move", "room" : "coast2" },
				"enter" : {
					"conditions" : [
						{
							"type" : "extra",
							"extra" : [
								["cave"]
							]
						}
					],
					"choice" : [
						{
							"conditions" : [
								{
									"type" : "state",
									"op" : "set",
									"var" : "sacrifice_billy"
								}
							],
							"actions" : [
								{
									"action" : "message",
									"message" : "You follow Billy into the cave in search of your valued garbage disposal."
								},
								{
									"action" : "message",
									"message" : "Upon entering the cave, the ground shakes as the teeth of the cave close behind you."
								},
								{
									"action" : "move",
									"room" : "caveEntrance"
								}
							]
						},
						{
							"action" : "message",
							"message" : "Are you crazy? How do you know it is safe? The cave's 'mouth' looks like it has teeth."
						}
					]
				},
				"feed" : {
					"conditions" : [
						{
							"type" : "extra",
							"extra" : [
								["billy", "to", "cave"],
								["goat", "to", "cave"]
							]
						}
					],
					"choice" : [
						{
							"conditions" : [
								{
									"type" : "state",
									"op" : "set",
									"var" : "sacrifice_billy"
								}
							],
							"actions" : [
								{
									"action" : "message",
									"message" : "You have no further goats to sacrifice to appease the cave monster."
								}
							]
						},
						{
							"conditions" : [
								{
									"type" : "state",
									"op" : "set",
									"var" : "have_billy"
								}
							],
							"actions" : [
								{
									"action" : "message",
									"message" : "Billy disappears into the mouth of the cave, and doesn't come out. There goes your garbage disposal."
								},
								{
									"action" : "state_set",
									"var" : "sacrifice_billy"
								}
							]
						}
					]
				}
			}
		},
		"caveEntrance" : {
			"desc" : "You are at the entrance of the cave. With what little light is peering in between the teeth of te cave mouth, you can see a pile of bones to the west, and a slightly flooded section to the east.",
			"actions" : {
				"west" : { "action" : "move", "room" : "caveBoneRoom" },
				"east" : { "action" : "move", "room" : "floodedRoom1" },
				"search" : {
					"conditions" : [
						{
							"type" : "extra",
							"extra" : [
								["bones"],
								["bones", "for", "billy"],
								["bones", "for", "goat"]
							]
						}
					],
					"action" : "message",
					"message" : "You search the bones for a sign of Billy, but alas, he must have ventured deeper into the cave"
				}
			}
		},
		"floodedRoom1" : {
			"desc" : "You wade into the flooded portion of the cave. The path has gotten so dark, you can only feel the water nipping at your knees. Ahead, you hear the sound of rushing water.",
			"actions" : {
				"west" : { "action" : "move", "room" : "caveBoneRoom" },
				"east" : { "action" : "move", "room" : "floodedRoom2" }
			}
		},
		"floodedRoom2" : {
			"desc" : "You wade further into the flooded portion of the cave. The rushing water sounds louder and you can feel the water level is now waist deep.",
			"actions" : {
				"west" : { "action" : "move", "room" : "floodedRoom1" },
				"east" : { "action" : "move", "room" : "floodedRoom3" }
			}
		},
		"floodedRoom3" : {
			"desc" : "You float even further into the flooded portion of the cave. The water is so deep here that you are having trouble touching the ground. The rushing water is deafening now and immediately to your east.",
			"actions" : {
				"west" : { "action" : "move", "room" : "floodedRoom2" },
				"east" : { "action" : "move", "room" : "rapids" }
			}
		},
		"rapids" : {
			"desc" : "You take one more step forward and suddenly you are whisked up my the current and are now floating down what must be underground rapids. Everything is still pitch black, hope you know how to swim.",
			"actions" : {
				"swim" : 
				{ 
					"action" : "die", 
					"message" : "Unfortunately you don't know how to swim. Guess you should have thought of that before wading into a flooded tunnel." 
				}
			}
		}
	}
}
